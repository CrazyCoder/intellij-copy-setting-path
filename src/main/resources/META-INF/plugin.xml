<idea-plugin>
  <id>io.github.crazycoder.copysettingpath</id>
  <name>Copy Setting Path</name>
  <vendor email="sbaranov@gmail.com" url="https://github.com/CrazyCoder">Serge Baranov</vendor>

  <description><![CDATA[
    <p>Adds <b>Copy Setting Path</b> action which copies the full navigation path to any UI setting in IDE dialogs or
      main menu items to the clipboard.</p>

    <h3>Features</h3>
    <ul>
      <li>Copy full path to any option in Settings dialogs (e.g., <code>Settings | Editor | Code Style | Java</code>)
      </li>
      <li>Copy full path from main menu items (e.g., <code>File | Manage IDE Settings | Export Settings</code>)</li>
      <li>Works with Project Structure dialog in IntelliJ IDEA and EDU products</li>
      <li>Supports navigation via <b>Ctrl+Click</b> (Cmd+Click on macOS)</li>
      <li>Handles tree structures, tabs, titled panels, buttons, labels, and tables</li>
      <li>Configurable path separator style (pipe, arrow, or breadcrumb) via <b>Advanced Settings</b></li>
      <li>Optional mouse click interception via <b>Advanced Settings</b></li>
    </ul>

    <h3>Usage</h3>
    <ul>
      <li><b>Settings/Dialogs:</b> Use <b>Ctrl+Click</b> (Cmd+Click on macOS) on any UI element</li>
      <li><b>Main Menu:</b> Enable mouse interception in Advanced Settings, then <b>Ctrl+Click</b> on any menu item to
        copy its path (the menu action will not execute)
      </li>
      <li>The full path is copied to the clipboard</li>
    </ul>

    <h3>Configuration</h3>
    <p>Go to <b>Settings | Advanced Settings | Copy Setting Path</b> to configure:</p>
    <ul>
      <li><b>Path separator style</b>: Choose between pipe (<code>|</code>), arrow (<code>→</code>) and other styles
      </li>
      <li><b>Mouse click interception</b>: Enable to copy paths without activating UI components, and to enable main
        menu path copying
      </li>
      <li><b>Balloon notification</b>: Toggle the brief popup that appears near the mouse cursor when a path is copied
        (enabled by default)
      </li>
    </ul>

    <h3>Shortcut Conflict</h3>
    <p>The default <b>Ctrl+Click</b> (Cmd+Click on macOS) shortcut conflicts with <b>multiple selection</b> in lists and
      trees.
      When mouse interception is enabled, a warning notification will appear with a link to Keymap settings.</p>
    <p><b>Recommendation:</b> Change the shortcut in <b>Settings | Keymap</b> to use:</p>
    <ul>
      <li><b>Right-click shortcuts</b> — e.g., <b>Ctrl+Right Click</b> or <b>Shift+Right Click</b></li>
      <li><b>Additional modifiers</b> — e.g., <b>Ctrl+Shift+Click</b> or <b>Ctrl+Alt+Click</b></li>
    </ul>

    <h3>Platform Limitations</h3>
    <p><b>Main menu path copying is not supported</b> when the IDE uses native (OS-provided) menus:</p>
    <ul>
      <li><b>macOS:</b> Native menu bar is enabled by default</li>
      <li><b>Linux:</b> Native menu integration may be enabled depending on your desktop environment</li>
    </ul>

    <h3>Important Notice</h3>
    <p>This plugin is <b>incompatible</b> with the legacy <b>Copy Option Path</b> plugin. If you have the old plugin
      installed, please <b>uninstall it</b> before using this plugin. The IDE will prevent both plugins from running
      simultaneously.</p>
    ]]></description>

  <idea-version since-build="251"/>

  <!-- Declare incompatibility with the legacy "Copy Option Path" plugin -->
  <!--suppress PluginXmlValidity -->
  <incompatible-with>com.intellij.plugin.copy.options</incompatible-with>

  <depends>com.intellij.modules.platform</depends>
  <depends>com.intellij.modules.lang</depends>

  <resource-bundle>messages.CopySettingPathBundle</resource-bundle>

  <applicationListeners>
    <listener class="io.github.crazycoder.copysettingpath.CopySettingPathAppLifecycleListener"
              topic="com.intellij.ide.AppLifecycleListener"/>
    <listener class="io.github.crazycoder.copysettingpath.CopySettingPathDynamicPluginListener"
              topic="com.intellij.ide.plugins.DynamicPluginListener"/>
  </applicationListeners>

  <extensions defaultExtensionNs="com.intellij">
    <!-- Notification group for plugin warnings -->
    <notificationGroup id="Copy Setting Path"
                       displayType="BALLOON"
                       bundle="messages.CopySettingPathBundle"
                       key="notification.group.copy.setting.path"/>

    <!-- Advanced setting to control mouse click interception -->
    <advancedSetting id="copy.setting.path.mouse.intercept"
                     default="false"
                     groupKey="group.advanced.settings.copy.setting.path"
                     bundle="messages.CopySettingPathBundle"/>

    <!-- Advanced setting to include adjacent value for labels ending with colon -->
    <advancedSetting id="copy.setting.path.include.adjacent.value"
                     default="true"
                     groupKey="group.advanced.settings.copy.setting.path"
                     bundle="messages.CopySettingPathBundle"/>

    <!-- Advanced setting to show balloon notification when path is copied -->
    <advancedSetting id="copy.setting.path.show.balloon"
                     default="true"
                     groupKey="group.advanced.settings.copy.setting.path"
                     bundle="messages.CopySettingPathBundle"/>

    <!-- Advanced setting for path separator style -->
    <advancedSetting id="copy.setting.path.separator"
                     default="PIPE"
                     enumClass="io.github.crazycoder.copysettingpath.PathSeparator"
                     groupKey="group.advanced.settings.copy.setting.path"
                     bundle="messages.CopySettingPathBundle"/>
  </extensions>

  <actions>
    <!--suppress PluginXmlI18n -->
    <action id="CopySettingPath" description="Copies setting path to clipboard" text="Copy Setting Path"
            class="io.github.crazycoder.copysettingpath.actions.CopySettingPath">
      <mouse-shortcut keymap="$default" keystroke="control button1"/>
      <mouse-shortcut keymap="Mac OS X 10.5+" keystroke="meta button1"/>
      <mouse-shortcut keymap="Mac OS X" keystroke="meta button1"/>
      <mouse-shortcut keymap="Default for GNOME" keystroke="control button1"/>
      <mouse-shortcut keymap="Default for KDE" keystroke="control button1"/>
      <mouse-shortcut keymap="Default for XWin" keystroke="control button1"/>
    </action>
  </actions>

</idea-plugin>
